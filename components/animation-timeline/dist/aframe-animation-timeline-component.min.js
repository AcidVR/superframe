!function(t){function i(n){if(e[n])return e[n].exports;var a=e[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i){function e(t){var i,e={};for(i in t)"function"==typeof t[i]?e[i]=t[i]:"object"==typeof t[i]?e[i]=AFRAME.utils.clone(t[i]):e[i]=t[i];return e}document.registerElement("a-timeline"),document.registerElement("a-timeline-group"),document.registerElement("a-timeline-animation"),AFRAME.registerComponent("animation-timeline",{schema:{direction:{type:"string",default:"normal"},loop:{default:0,parse:function(t){return"true"===t||"false"!==t&&parseInt(t,10)}},pauseEvents:{type:"array"},startEvents:{type:"array"},timeline:{type:"string"}},multiple:!0,init:function(){var t,i=this.data;for(this.animationIsPlaying=!1,this.beginAnimation=this.beginAnimation.bind(this),this.play=this.play.bind(this),this.eventDetail={name:this.id},this.time=0,this.timeline=null,t=0;t<i.startEvents.length;t++)this.el.addEventListener(i.startEvents[t],this.beginAnimation);for(t=0;t<i.pauseEvents.length;t++)this.el.addEventListener(i.pauseEvents[t],this.pauseAnimation)},play:function(){if(!this.data.startEvents.length){const t=this.timeline&&this.timeline.currentTime;!this.animationIsPlaying&&t>0?this.animationIsPlaying=!0:this.beginAnimation()}},restart:function(){this.data.startEvents.length||this.beginAnimation()},tick:function(t,i){this.animationIsPlaying&&this.timeline&&(this.time+=i,this.timeline.tick(this.time))},beginAnimation:function(){var t,i,e,n,a,o,s,r=this;if(o=document.querySelector(this.data.timeline),"A-TIMELINE"!==o.tagName)throw new Error("[animation-timeline] timeline must be a selector to <a-timeline> element.");for(this.animationIsPlaying=!0,this.time=0,this.timeline=(AFRAME.anime||AFRAME.ANIME).timeline({autoplay:!1,complete:function(){r.animationIsPlaying=!1,r.el.emit("animationtimelinecomplete",r.eventDetail)},direction:this.data.direction,loop:this.data.loop}),a=0,t=0;t<o.children.length;t++)if("A-TIMELINE-GROUP"!==o.children[t].tagName)"A-TIMELINE-ANIMATION"===o.children[t].tagName&&(a+=this.addAnimationToTimeline(o.children[t],a));else{for(s=o.children[t],n=0,i=0;i<s.children.length;i++)e=this.addAnimationToTimeline(s.children[i],a),e>n&&(n=e);a+=n}},addAnimationToTimeline:function(t,i){var n,a,o,s,r,l,m;if(a="animation__"+t.getAttribute("name"),m=t.getAttribute("select"),r=this.el.sceneEl.querySelectorAll(m),!r.length)return console.warn('[animation-timeline] No entities found for select="'+m+'"'),0;for(n=parseFloat(t.getAttribute("offset")||0,10),l=0;l<r.length;l++){if(o=r[l].components[a],!o)throw new Error("Could not find animation `"+a+"` for `"+t.getAttribute("select")+"`.");o.updateConfig(),o.stopRelatedAnimations(),s=e(o.config),s.offset=i+n,this.timeline.add(s)}return(s.duration||0)+(s.delay||0)+n},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0}})}]);